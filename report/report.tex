\include{settings}

\begin{document}	% начало документа

% Титульная страница
\include{titlepage}

% Содержание
%\include{ToC}


% настрока частичного ввода (требуется один раз)
\makeatletter
\def\lst@PlaceNumber{\llap{\normalfont
                \lst@numberstyle{\the\lst@lineno}\kern\lst@numbersep}}
\makeatother


\section{Цель работы}

Изучение принципов программирование сокетов с использованием протоколов TCP и UDP.

\section{Программа работы}

TCP:

\begin{itemize}
\item Реализация простейшего TCP сервера и клиента на ОС Linux и Windows.
\item Реализация многопоточного обслуживания клиентов на сервере.
\item Реализация собственного протокола на основе TCP для индивидуального задания (сервер на Windows, клиент на Linux).
\end{itemize}

UDP:

\begin{itemize}
\item Модификация сервера и клиента для протокола UDP на ОС Windows и Linux.
\item Реализация собственного протокола на основе UDP для индивидуального задания (сервер на Linux, клиент на Windows).
\item Обеспечение надежности протокола UDP, посредством нумерации пакетов и посылки ответов
\end{itemize}

\section{Индивидуальное задание}

\subsection{Задание} 

Разработать клиент-серверную систему дистанционного тестирования знаний, состоящую из централизованного сервера тестирования и клиентов тестирования.

\subsection{Основные возможности}

Серверное приложение должно реализовывать следующие функции:
\vspace{5mm}

\begin{enumerate}
\itemПрослушивание определенного порта
\itemОбработка запросов на подключение по этому порту от клиентов
\itemПоддержка одновременной работы нескольких клиентов через механизм нитей
\itemРегистрация клиента, выдача клиенту результата его последнего теста, выдача клиенту списка тестов
\itemПолучение от клиента номера теста
\itemПоследовательная выдача клиенту вопросов теста и получение ответов на вопросы
\itemПосле прохождения теста – выдача клиенту его результата
\itemОбработка запроса на отключение клиента
\itemПринудительное отключение клиента
\end{enumerate}

\vspace{5mm}
Клиентское приложение должно реализовывать следующие функции:
\vspace{5mm}

\begin{enumerate}
\itemУстановление соединения с сервером
\itemПосылка регистрационных данных клиента
\itemВыбор теста
\itemПоследовательная выдача ответов на вопросы сервера
\itemИндикация результатов теста
\itemРазрыв соединения
\itemОбработка ситуации отключения клиента сервером
\end{enumerate}

\vspace{5mm}

\subsection{Настройки приложений}

\vspace{5mm}

Разработанное клиентское приложение должно предоставлять пользователю возможность введения идентификационной информации, настройки IP-адреса или доменного имени, а также номера порта сервера информационной системы.

\vspace{5mm}

Разработанное серверное приложение должно предоставлять пользователю возможность настройки начальной точки входа в информационную систему каждого пользователя.

\section{Простейший TCP сервер и клиент}

Для создания сокета в библиотеках BSD-socket и WinSock имеется системный вызов socket:

\vspace{5mm}

\lstinputlisting[
	label=code:teor1,
	linerange={1-1},
	caption={Вызов socket},
]{theory.cpp}
\parindent=1cm

\vspace{5mm}

Для установления TCP-соединения используется вызов connect:

\lstinputlisting[
	label=code:teor2,
	linerange={2-2},
	caption={Вызов connect},
]{theory.cpp}
\parindent=1cm

Результатом выполнения функции является установление TCP-соединения с TCP-сервером.

\vspace{5mm}

Передача и приём данных в рамках установленного TCP-соединения осуществляется вызовами send и recv:

\lstinputlisting[
	label=code:teor3,
	linerange={3-4},
	caption={Вызов send и recv},
]{theory.cpp}
\parindent=1cm

Параметр s – дескриптор сокета, параметр msg – указатель на буфер, содержащий данные (вызов send), или указатель на буфер, предназначенный для приёма данных (вызов recv). Параметр len – длина буфера в байтах, параметр flags – опции посылки или приёма данных.

Возвращаемое значение – число успешно посланных или принятых байтов, в случае ошибки функция возвращает значение -1.

\vspace{5mm}

В общем виде алгоритм работы сервера следующий: 
\vspace{5mm}

\begin{enumerate}
\itemСоздание сокета с помощью вызова connect. При этом локальные адрес и порт сокету назначаются из числа свободных;  
\itemПривязка сокета к удаленному адресу с помощью вызова bind (для сервера устанавливается адрес INADDR\_ANY, который позволяет получать данные с любых адресов); 
\itemПеревод сокета в состояние прослушивания соединений с помощью вызова listen. При этом данные передавать через сокет нельзя, единственная его задача – получение запросов на соединение; 
\itemПрием соединений клиентов с помощью вызова accept. Данный вызов блокирует выполнение потока, пока не придет соединение от клиента, в результате которого создастся новый сокет, связанный с адресом клиента; 
\itemДалее происходит прием/передача данных. 
\end{enumerate}

\lstinputlisting[
	label=code:tsl,
	caption={TCP сервер на Linux},
]{tcp_server_linux.c}
\parindent=1cm

\lstinputlisting[
	label=code:tcl,
	caption={TCP клиент на Linux},
]{tcp_client_linux.c}
\parindent=1cm

\subsection{Картинка}

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.7]{sample}
		\caption{название картинки} 
		\label{pic:pic_name} % название для ссылок внутри кода
	\end{center}
\end{figure}






\section{Выводы}
\LaTeX\ удобен для создания отчётов, так как сам следит за нумерацией таблиц, рисунков, листингов и отсылок к ним (так, например, здесь всегда будет указан номер рисунка "sample" не зависимо от того, какой он (1,2 или другой) - это рисунок \ref{pic:pic_name}). Не менее важно что весь документ оформлен в едином стиле, а исходные материалы подключаются к отчёту, а не хранятся в нём. Всё это позволяет легко получить качественный отчёт без дополнительных трат на его офрмление.

Исключения, пожалуй, составляют таблицы, так как их значительно сложнее создавать кодом, нежели в графическом редакторе. Но здесь никто не запрещает использовать визуальные средства создания таблиц для \LaTeX\ .
\end{document}
